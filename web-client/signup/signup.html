<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link rel=icon type=image/x-icon href=../assets/favicon.png>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Learned Bootstrap Tutorial From -->
    <!-- https://getbootstrap.com/-->

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/25ed10730a.js" crossorigin="anonymous"></script>

    <!-- Personalized CSS -->
    <link rel="stylesheet" href="signup.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </script>
    <script>
        window.onload = function() {
                document.querySelector('.button').onclick = function() {
                    var password = document.getElementById("pswd").value;
                    var confirmP = document.getElementById("confirm").value;
                    console.log(password);
                    console.log(confirmP);
                    if (password == "") {
                        alert("Field cannot be empty.");
                    } else if (password != confirmP) {
                        alert("Password didn't match try again.");
                        return false;
                    }
                }
            }
            // $(document).ready(function() {
            //     var fName, lName, email, uname, password;
            //     $("#submit-btn").click(function() {
            //         fName = $("#fName").val();
            //         lName = $("#l_name").val();
            //         email = $("#email").val();
            //         uname = $("#username").val();
            //         password = $("#pswd").val();
            //         $.post("http://128.10.25.205:8000/create_account", {
            //             f_name: fName,
            //             l_name: lName,
            //             email: email,
            //             username: uname,
            //             password: password
            //         }, function(data) {
            //             console.log(data);
            //             if (data == 'yes') {
            //                 alert("signup success");
            //             }
            //         });
            //         // window.location = "../dashboard/dashboard.html";
            //     });
            // });





        // $(document).ready(function() {
        //     $("#submit-btn").click(function() {
        //         location.replace('../dashboard/dashboard.html');
        //     });
        // });
    </script>

    <!-- file:///u/riker/u94/agunase/cs307/WerkIt/web-client/dashboard/dashboard.html -->
    <title>Sign Up</title>
    <!-- <meta http-equiv="refresh" content="5; url=../dashboard/dashboard.html"> -->
</head>
<!-- action="http://128.10.25.203:8000/create_account" Must Add to form later-->

<body>
    <div class="signup-form">
        <form name="signUp" action="http://10.0.0.48:8000/web/create_account" method="POST">
            <!-- Header -->
            <div class="text-center" id="container">
                <a href="../index.html"><i
                        class="animate__animated animate__slideInLeft health-icon fas fa-running"></i></a>
                <h2>Create An Account</h2>
            </div>
            <hr>
            <!-- First Name -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fas fa-user"></i></span>
                    <label for="test"></label>
                    <input id="fName" type="text" class="form-control" name="f_name" value="" placeholder="First Name" required="required">
                </div>
            </div>

            <!-- Last Name -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="far fa-user"></i></span>
                    <input type="text" id="l_name" class="form-control" name="l_name" placeholder="Last Name" required="required">
                </div>
            </div>

            <!-- Email -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fas fa-envelope"></i></span>
                    <input type="email" id="email" class="form-control" name="email" placeholder="Email" required="required">
                </div>
            </div>

            <!-- Username -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fas fa-user-shield"></i></span>
                    <input type="text" id="username" class="form-control" name="username" placeholder="Username" required="required">
                </div>
            </div>

            <!-- Password -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fas fa-key"></i></span>
                    <input type="password" id="pswd" class="form-control password" name="password" placeholder="Password" required="required">
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fas fa-key"></i></span>
                    <input id="confirm" type="password" class="form-control confirmPassword" name="confirmPass" placeholder="Confirm Password" required="required">
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12 text-center">
                    <p></p>
                    <button id="submit-btn" value="Submit" class="button btn btn-signup btn-lg btn-block" type="submit">Signup</button>
                </div>

            </div>
            <div class="form-group row">
                <div class="col-sm-12 text-center">
                    <p>Have an account already?</p>
                    <a href="../login/login.html" class="btn btn-login btn-lg btn-block" role="button">Login</a>
                    <!-- <button type="submit" class="btn btn-login">Login</button> -->
                </div>
            </div>
        </form>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script>
        $("#submit-btn").click(function(event) {
            event.preventDefault();
            var fName = $("#fName").val();
            var lName = $("#l_name").val();
            var email = $("#email").val();
            var uname = $("#username").val();
            var password = $("#pswd").val();
            localStorage.setItem("user", uname);
            // var profiles = {
            //     "f_name": fName,
            //     "l_name": lName,
            //     "email": email,
            //     "username": uname,
            //     "password": password
            // };
            $.ajax({
                    url: 'http://127.0.0.1:8000/create_account',
                    type: 'POST',
                    cache: false,
                    data: {
                        f_name: fName,
                        l_name: lName,
                        email: email,
                        username: uname,
                        password: password
                    },
                    success: function(data, textStatus) {
                        window.location.href = 'file:///u/riker/u94/agunase/cs307/WerkIt/web-client/dashboard/dashboard.html';
                    },
                    error: function(jqXHR, textStatus, err) {
                        alert("please enter correct credentials and try again");
                    }
                })
                // window.location = "../dashboard/dashboard.html";
        });
    </script>
</body>

</html>